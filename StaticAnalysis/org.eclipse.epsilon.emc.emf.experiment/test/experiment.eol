var allContents = m.allContents();

var size = allContents.size();

var counter = new Map;

for(a in allContents)
{
	var count = counter.get(a.type());
	if(count.isDefined())
	{
		count = count + 1;
		counter.put(a.type(), count);
	}
	else
	{
		counter.put(a.type(), 1);
	}
}

var sum = 0;

for(k in counter.keySet())
{
	k.name.print();
	": ".print();
	var val = counter.get(k);
	sum = sum + val;
	val.println();
}

sum.println();

size.println();

var eolQueryString = "";

for(clazz in getPercent(counter, sum, 100))
{
	eolQueryString = eolQueryString + "var " + clazz.name.firstToLowerCase() + " = " + clazz.name + ".all.first;\n";
	
	clazz.name.print();
	": ".print();
	var val = counter.get(clazz);
	val.println();
}

eolQueryString.println();



operation getPercent(counter: Map, size: Integer, percent : Integer)
{
	var result = new Set;
	var number = size*percent/100;
	var sum = 0;
	for(k in counter.keySet())
	{
		var value = counter.get(k);
		if(value < number)
		{
			if(value + sum <= number and value + sum < number * 1.2)
			{
				sum = sum + value;
				result.add(k);
			}
		}
		if(sum > number)
		{
			break;
		}
	}
	sum.errln();
	return result;
}